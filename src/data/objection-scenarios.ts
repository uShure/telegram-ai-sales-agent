// Сценарии работы с возражениями в стиле Веры
export interface ObjectionScenario {
  objection: string;
  response: string;
  type: 'price' | 'time' | 'distance' | 'doubt' | 'format' | 'value';
  keywords: string[];
}

export const objectionScenarios: ObjectionScenario[] = [
  // ВОЗРАЖЕНИЯ ПО ЦЕНЕ
  {
    objection: "Дорого",
    type: 'price',
    response: `Понимаю, сумма серьёзная. Давайте посмотрим на это как на инвестицию.

После курса вы сможете:
• Поднять цену на стрижку минимум на 500-1000₽
• Добавить новые услуги в прайс
• Привлечь более платёжеспособных клиентов

Если вы делаете хотя бы 15 стрижек в месяц, курс окупится за 2-3 месяца. А знания останутся навсегда.

Плюс у нас есть рассрочка — можно разделить платёж на несколько месяцев без процентов. Так комфортнее?`,
    keywords: ['дорого', 'дорогой', 'дороговато', 'цена', 'стоимость', 'денег нет', 'нет денег', 'бюджет']
  },
  {
    objection: "У меня сейчас нет таких денег",
    type: 'price',
    response: `Очень понимаю! Не у всех есть свободная сумма прямо сейчас.

У нас есть варианты:
• Рассрочка от банка — от 3 до 12 месяцев, без первого взноса
• Бронь со скидкой на будущие потоки — фиксируете цену сейчас, оплачиваете когда удобно
• Многие берут 2-3 дополнительных клиента и откладывают эти деньги

Кстати, можно поговорить с руководством салона — часто оплачивают обучение сотрудников. Или взять справку для налогового вычета — вернёте 13%.

Что из этого могло бы подойти?`,
    keywords: ['нет денег', 'нет таких денег', 'не могу себе позволить', 'копить', 'накопить']
  },

  // ВОЗРАЖЕНИЯ ПО ВРЕМЕНИ
  {
    objection: "У меня нет времени",
    type: 'time',
    response: `Знакомая история! У всех мастеров расписание забито под завязку.

Но смотрите:
• 3 дня офлайн — это меньше, чем растянутое на месяцы онлайн обучение
• Многие специально берут эти дни как мини-отпуск
• После курса вы будете работать быстрее и увереннее — время освободится

Знаете, что говорят наши выпускницы? "Я думала, нет времени учиться. А оказалось — нет времени НЕ учиться и работать по-старому".

Может, посмотрим даты на 2-3 месяца вперёд? Успеете спланировать график.`,
    keywords: ['нет времени', 'некогда', 'занята', 'график', 'не могу уехать', 'расписание']
  },
  {
    objection: "Не могу оставить клиентов на 3 дня",
    type: 'time',
    response: `О, это говорит о вас как об ответственном мастере! Клиенты вас ценят.

Но знаете что? Клиенты ПОНИМАЮТ, когда мастер учится:
• Предупредите за месяц — все успеют записаться до или после
• Скажите, что едете на обучение — это повышает ваш статус
• Многие даже ждут: "Что нового привезёшь?"

А главное — вернётесь с новыми техниками, и клиенты это сразу заметят. Некоторые даже начинают приводить подруг: "Мой мастер учится у самой Алексеюк!"

3 дня инвестиции в себя — и годы работы на новом уровне. Клиенты только спасибо скажут.`,
    keywords: ['клиенты', 'оставить клиентов', 'потеряю клиентов', 'запись', 'не отпустят']
  },

  // ВОЗРАЖЕНИЯ ПО РАССТОЯНИЮ
  {
    objection: "Далеко ехать",
    type: 'distance',
    response: `Понимаю сомнения! Но знаете, к нам приезжают со всей России — из Владивостока, Калининграда, Сочи. И все говорят одно: "Это того стоило!"

Почему:
• За 3 дня полного погружения вы получите больше, чем за месяцы онлайн-обучения
• Это не просто курс — это перезагрузка, отдых от рутины
• Познакомитесь с мастерами со всей страны — бесценный нетворкинг

Плюс подумайте: вы же ездите в отпуск? А это отпуск с пользой — и отдохнёте, и научитесь.

Поможем с логистикой, подскажем, как удобнее добраться. Многие объединяются и едут вместе — веселее и дешевле.`,
    keywords: ['далеко', 'ехать', 'дорога', 'добираться', 'из другого города', 'не из москвы']
  },

  // СОМНЕНИЯ В СЕБЕ
  {
    objection: "Боюсь не справиться",
    type: 'doubt',
    response: `Ой, это так знакомо! Знаете, 90% наших учениц приезжают с этим страхом. И знаете, что происходит? Справляются ВСЕ!

Почему не стоит бояться:
• Программа построена от простого к сложному
• Преподаватель объясняет, пока не поймёте
• Группа маленькая — никто не осудит, все поддержат
• Можно переспросить, переделать, попробовать снова

У нас учатся и новички, и мастера с 20-летним стажем. И каждый находит своё.

Знаете, что самое частое после курса? "Зря я так боялась! Оказалось, я могу больше, чем думала!"

Страх — это нормально. Но не давайте ему решать за вас.`,
    keywords: ['боюсь', 'страшно', 'не справлюсь', 'не получится', 'не смогу', 'сложно', 'не потяну']
  },
  {
    objection: "Я уже опытный мастер, что мне даст курс?",
    type: 'doubt',
    response: `Отличный вопрос! Именно опытные мастера получают от наших курсов максимум.

Почему:
• Вы систематизируете то, что делаете интуитивно
• Узнаете, ПОЧЕМУ работают ваши приёмы
• Избавитесь от ошибок, которые тянутся годами
• Получите новый взгляд на привычные вещи

Многие опытные мастера говорят: "Я думала, всё знаю. А оказалось — работала на 30% от возможного".

Плюс Елена Алексеюк даёт не просто техники, а философию работы. Это про другой уровень мышления.

Для вас курс — это не учёба с нуля, а апгрейд до уровня эксперта. Готовы к новому витку?`,
    keywords: ['опытный', 'уже умею', 'всё знаю', 'много лет работаю', 'что нового', 'зачем мне']
  },

  // СОМНЕНИЯ В ФОРМАТЕ
  {
    objection: "Онлайн не моё, не дойду до конца",
    type: 'format',
    keywords: ['не дойду', 'заброшу', 'не досмотрю', 'откладываю', 'прокрастинация', 'онлайн не моё', 'не люблю онлайн', 'не подходит онлайн'],
    response: `Очень понимаю! У многих есть печальный опыт с онлайн-курсами — купил и забросил.

У нас по-другому:
• Личный наставник, который не даст слиться
• Чёткие дедлайны и проверка домашек
• Группа поддержки — стыдно отставать
• Доступ навсегда — можно вернуться в любой момент

Но знаете что? Раз вы сомневаетесь в онлайне, может, рассмотрите офлайн в Творческой деревне? 3 дня — и вы точно всё пройдёте, ничего не отложите на потом.

Что важнее: гибкий график онлайн или гарантия, что точно дойдёте до конца?`
  },
  {
    objection: "3 дня это мало",
    type: 'format',
    response: `Кажется, что мало, да? Но это иллюзия!

За 3 дня интенсива вы получите больше, чем за месяцы обычного обучения:
• 8 часов практики в день — это 24 часа чистой работы
• Полное погружение без отвлечений
• Сразу отрабатываете, не забываете
• Нет растянутости — мозг лучше усваивает

Это как учить язык: можно годами ходить на курсы по 2 часа в неделю, а можно поехать на 3 дня в языковую среду.

Плюс вы уезжаете не только с техниками, но с СИСТЕМОЙ. А это важнее, чем количество дней.

Многие потом говорят: "За эти 3 дня я узнала больше, чем за годы самостоятельной практики".`,
    keywords: ['мало', 'три дня', '3 дня', 'недостаточно', 'короткий курс', 'успеем']
  },

  // СОМНЕНИЯ В ЦЕННОСТИ
  {
    objection: "Я и так неплохо работаю",
    type: 'value',
    response: `Конечно! Иначе вы бы не задумывались о серьёзном обучении.

Но "неплохо" — это ваш потолок? Или хочется:
• Работать не уставая, а вдохновляясь
• Видеть восхищение в глазах клиентов, а не просто "спасибо"
• Назначать свою цену, а не ориентироваться на район
• Чувствовать себя экспертом, а не ремесленником

Курс — это не про "научиться работать". Это про "выйти на другой уровень".

Многие приходят со словами "я неплохо работаю", а уезжают: "теперь я понимаю, КАК я работаю и могу это контролировать".

Готовы от "неплохо" к "великолепно"?`,
    keywords: ['и так работаю', 'неплохо работаю', 'нормально стригу', 'зачем менять', 'и так клиенты']
  },
  {
    objection: "Не уверена, что это то, что мне нужно",
    type: 'value',
    response: `Понимаю сомнения! Выбор обучения — это важное решение.

Давайте проверим:
• Хотите работать увереннее? ✓
• Надоело стричь "на глаз"? ✓
• Хочется понимать, а не копировать? ✓
• Готовы к новому уровню дохода? ✓

Если хотя бы 2 "да" — курс точно для вас.

А чтобы совсем развеять сомнения:
• Почитайте отзывы выпускников на сайте
• Посмотрите работы до/после
• Напишите конкретные вопросы — отвечу детально

Иногда сомнения — это просто страх изменений. Но именно за изменениями вы же и пришли?`,
    keywords: ['не уверена', 'сомневаюсь', 'не знаю', 'подойдёт ли', 'то что нужно', 'надо подумать']
  },

  // ОТКЛАДЫВАНИЕ
  {
    objection: "Подумаю",
    type: 'doubt',
    response: `Конечно, подумайте! Это важное решение, не надо спешить.

Только учтите:
• Группы маленькие — места быстро заканчиваются
• Цены растут каждый сезон (в прошлом году было на 20% дешевле)
• Пока думаете — теряете клиентов, которые уходят к тем, кто уже учится

Могу забронировать место на 3 дня без оплаты? Успеете спокойно всё взвесить, а место будет за вами.

Или давайте я отправлю программу и отзывы — будет что изучить?

Что вас больше всего смущает? Может, смогу прояснить прямо сейчас?`,
    keywords: ['подумаю', 'подумать', 'надо подумать', 'посоветуюсь', 'потом', 'позже', 'не сейчас']
  }
];

// Функция для поиска подходящего ответа на возражение
export function findObjectionResponse(message: string): string | null {
  const lowerMessage = message.toLowerCase();

  // Ищем подходящее возражение по ключевым словам
  for (const scenario of objectionScenarios) {
    const hasKeyword = scenario.keywords.some(keyword =>
      lowerMessage.includes(keyword.toLowerCase())
    );

    if (hasKeyword) {
      return scenario.response;
    }
  }

  return null;
}

// Функция для определения типа возражения
export function getObjectionType(message: string): string | null {
  const lowerMessage = message.toLowerCase();

  for (const scenario of objectionScenarios) {
    const hasKeyword = scenario.keywords.some(keyword =>
      lowerMessage.includes(keyword.toLowerCase())
    );

    if (hasKeyword) {
      return scenario.type;
    }
  }

  return null;
}
