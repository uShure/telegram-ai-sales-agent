const Database = require('bun:sqlite').Database;

console.log('üìö –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫—É—Ä—Å–∞ "–î–ù–ö –¶–í–ï–¢–ê –≤ –¢–≤–æ—Ä—á–µ—Å–∫–æ–π –¥–µ—Ä–µ–≤–Ω–µ"...');

try {
  const db = new Database('courses.db');

  // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —É–∂–µ –∫—É—Ä—Å —Å —Ç–∞–∫–∏–º –Ω–∞–∑–≤–∞–Ω–∏–µ–º
  const existingCourse = db.prepare(`
    SELECT * FROM courses
    WHERE name LIKE '%–î–ù–ö –¶–í–ï–¢–ê%–¢–≤–æ—Ä—á–µ—Å–∫–æ–π –¥–µ—Ä–µ–≤–Ω–µ%'
  `).get();

  if (existingCourse) {
    console.log('‚ö†Ô∏è –ö—É—Ä—Å —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö');
    db.close();
    process.exit(0);
  }

  // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–π –∫—É—Ä—Å
  const insertQuery = db.prepare(`
    INSERT INTO courses (
      name,
      price,
      description,
      duration,
      benefits,
      targetAudience,
      curriculum,
      enrollmentUrl,
      format,
      active
    ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
  `);

  const result = insertQuery.run(
    '–î–ù–ö –¶–í–ï–¢–ê - –§—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π –∫—É—Ä—Å –≤ –¢–≤–æ—Ä—á–µ—Å–∫–æ–π –¥–µ—Ä–µ–≤–Ω–µ',
    60000,
    '–§—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π –∫—É—Ä—Å –ø–æ –∫–æ–ª–æ—Ä–∏—Å—Ç–∏–∫–µ –≤ –¢–≤–æ—Ä—á–µ—Å–∫–æ–π –¥–µ—Ä–µ–≤–Ω–µ. 3 –¥–Ω—è –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è —Å –ï–ª–µ–Ω–æ–π –ê–ª–µ–∫—Å–µ—é–∫.',
    '3 –¥–Ω—è (30 —Å–µ–Ω—Ç—è–±—Ä—è - 2 –æ–∫—Ç—è–±—Ä—è)',
    '‚úÖ –õ–∏—á–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ –æ—Ç –ï–ª–µ–Ω—ã –ê–ª–µ–∫—Å–µ—é–∫\n‚úÖ –î–∏–ø–ª–æ–º –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –æ–±—Ä–∞–∑—Ü–∞ –æ –ø–æ–≤—ã—à–µ–Ω–∏–∏ –∫–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏–∏\n‚úÖ –í—Å–µ –≤–∫–ª—é—á–µ–Ω–æ: –ø—Ä–æ–∂–∏–≤–∞–Ω–∏–µ –∏ –ø–∏—Ç–∞–Ω–∏–µ –≤ –¢–≤–æ—Ä—á–µ—Å–∫–æ–π –¥–µ—Ä–µ–≤–Ω–µ\n‚úÖ –ü—Ä–∞–∫—Ç–∏–∫–∞ –Ω–∞ –º–æ–¥–µ–ª—è—Ö\n‚úÖ –í—Å–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –≤–∫–ª—é—á–µ–Ω—ã',
    '–ü–∞—Ä–∏–∫–º–∞—Ö–µ—Ä—ã-–∫–æ–ª–æ—Ä–∏—Å—Ç—ã, –º–∞—Å—Ç–µ—Ä–∞ –ø–æ –æ–∫—Ä–∞—à–∏–≤–∞–Ω–∏—é, —Å—Ç–∏–ª–∏—Å—Ç—ã',
    '–î–µ–Ω—å 1: –û—Å–Ω–æ–≤—ã –∫–æ–ª–æ—Ä–∏—Å—Ç–∏–∫–∏ –∏ —Ç–µ–æ—Ä–∏—è —Ü–≤–µ—Ç–∞\n–î–µ–Ω—å 2: –ü—Ä–∞–∫—Ç–∏–∫–∞ —Å–ª–æ–∂–Ω—ã—Ö —Ç–µ—Ö–Ω–∏–∫ –æ–∫—Ä–∞—à–∏–≤–∞–Ω–∏—è\n–î–µ–Ω—å 3: –†–∞–±–æ—Ç–∞ —Å –±–ª–æ–Ω–¥–æ–º –∏ –∫–æ—Ä—Ä–µ–∫—Ü–∏—è —Ü–≤–µ—Ç–∞',
    'https://sointera-biz.ru/dna_person',
    '–æ—Ñ–ª–∞–π–Ω',
    1
  );

  console.log('‚úÖ –ö—É—Ä—Å —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö!');
  console.log('   ID –Ω–æ–≤–æ–≥–æ –∫—É—Ä—Å–∞:', result.lastInsertRowid);
  console.log('   –ù–∞–∑–≤–∞–Ω–∏–µ: –î–ù–ö –¶–í–ï–¢–ê - –§—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π –∫—É—Ä—Å –≤ –¢–≤–æ—Ä—á–µ—Å–∫–æ–π –¥–µ—Ä–µ–≤–Ω–µ');
  console.log('   –¶–µ–Ω–∞: 60,000 —Ä—É–±.');
  console.log('   –§–æ—Ä–º–∞—Ç: –æ—Ñ–ª–∞–π–Ω');
  console.log('   –î–∞—Ç—ã: 30 —Å–µ–Ω—Ç—è–±—Ä—è - 2 –æ–∫—Ç—è–±—Ä—è');

  // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∫—É—Ä—Å –¥–æ–±–∞–≤–ª–µ–Ω
  const addedCourse = db.prepare('SELECT * FROM courses WHERE id = ?').get(result.lastInsertRowid);
  if (addedCourse) {
    console.log('‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞: –∫—É—Ä—Å –Ω–∞–π–¥–µ–Ω –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö');
  }

  db.close();
  console.log('‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞–∫—Ä—ã—Ç–∞');

} catch (error) {
  console.error('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –∫—É—Ä—Å–∞:', error.message);
  process.exit(1);
}
