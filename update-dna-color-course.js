const Database = require('bun:sqlite').default;

console.log('üìù –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫—É—Ä—Å–∞ "–î–ù–ö –¶–í–ï–¢–ê" —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º...\n');

const db = new Database('./courses.db');

// –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ñ–ª–∞–π–Ω –∫—É—Ä—Å –î–ù–ö –¶–í–ï–¢–ê –≤ –¢–≤–æ—Ä—á–µ—Å–∫–æ–π –¥–µ—Ä–µ–≤–Ω–µ
const updateCourse = db.prepare(`
  UPDATE courses
  SET description = ?,
      curriculum = ?,
      benefits = ?,
      targetAudience = ?
  WHERE name = ?
`);

const newDescription = `–¢—Ä—ë—Ö–¥–Ω–µ–≤–Ω–æ–µ –æ—á–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ –≤ –¢–≤–æ—Ä—á–µ—Å–∫–æ–π –¥–µ—Ä–µ–≤–Ω–µ SOINTERA, –≥–¥–µ –≤—ã –∏–∑—É—á–∞–µ—Ç–µ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—É—é –∫–æ–ª–æ—Ä–∏—Å—Ç–∏–∫—É –±–µ–∑ –ø—Ä–∏–≤—è–∑–∫–∏ –∫ –±—Ä–µ–Ω–¥—É. –≠—Ç–æ –Ω–µ –ø—Ä–æ "–º–æ–¥–Ω–æ", –∞ –ø—Ä–æ —Ç–æ, —á—Ç–æ–±—ã –Ω–∞–∫–æ–Ω–µ—Ü-—Ç–æ —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ü–≤–µ—Ç ‚Äî –ø—Ä–æ—Å—Ç–æ, –ø–æ–Ω—è—Ç–Ω–æ –∏ —Å–∏—Å—Ç–µ–º–Ω–æ. –ö—É—Ä—Å –≤–∫–ª—é—á–∞–µ—Ç –≤–∞—Å –∫–∞–∫ –∫–æ–ª–æ—Ä–∏—Å—Ç–∞, –¥–∞–∂–µ –µ—Å–ª–∏ —Ä–∞–Ω—å—à–µ –≤—ã –¥–µ–π—Å—Ç–≤–æ–≤–∞–ª–∏ –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ.`;

const newCurriculum = `–û–°–ù–û–í–´ –ò –°–ò–°–¢–ï–ú–ê:
‚Ä¢ –ö–∞–∫ —É—Å—Ç—Ä–æ–µ–Ω—ã –±–∞–∑–æ–≤—ã–µ —Ç–æ–Ω–∞
‚Ä¢ –ö–∞–∫ –ø–µ—Ä–≤–∏—á–Ω—ã–µ —Ü–≤–µ—Ç–∞ –¥–∞—é—Ç –ª—é–±–æ–π –Ω—É–∂–Ω—ã–π –æ—Ç—Ç–µ–Ω–æ–∫
‚Ä¢ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—ã—â–µ–Ω–Ω–æ—Å—Ç—å—é, —Ç–µ–ø–ª–æ—Ç–æ–π, –≥–ª—É–±–∏–Ω–æ–π —Ü–≤–µ—Ç–∞
‚Ä¢ –≠–∫–æ–Ω–æ–º–∏—è –Ω–∞ –ø–∞–ª–∏—Ç—Ä–µ - –º–∏–Ω–∏–º—É–º —Å—Ä–µ–¥—Å—Ç–≤, –º–∞–∫—Å–∏–º—É–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

–ü–†–ê–ö–¢–ò–ö–ê –ß–ï–†–ï–ó –†–ò–°–û–í–ê–ù–ò–ï:
‚Ä¢ –†–∞–±–æ—Ç–∞ —Å —Ü–≤–µ—Ç–æ–º —á–µ—Ä–µ–∑ —Ä–∏—Å–æ–≤–∞–Ω–∏–µ –∫—Ä–∞—Å–∏—Ç–µ–ª—è–º–∏ –¥–ª—è –≤–æ–ª–æ—Å
‚Ä¢ –†—É—á–Ω–æ–µ "–ø–µ—Ä–µ–º–µ—à–∏–≤–∞–Ω–∏–µ" –æ—Ç—Ç–µ–Ω–∫–æ–≤
‚Ä¢ –ö–∞–∫ –º–µ–Ω—è–µ—Ç—Å—è —Ü–≤–µ—Ç –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –±–∞–∑—ã
‚Ä¢ –ù—é–∞–Ω—Å—ã –Ω–∞–Ω–µ—Å–µ–Ω–∏—è –∏ –∏—Ö –≤–ª–∏—è–Ω–∏–µ –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–†–û–î–í–ò–ù–£–¢–´–ï –¢–ï–•–ù–ò–ö–ò:
‚Ä¢ –û–±—ä—ë–º–Ω—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏ —Ç–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
‚Ä¢ –ü—Ä–∞–≤–∏–ª–∞ –∑–∞—Ç–µ–º–Ω–µ–Ω–∏—è
‚Ä¢ –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ —Ä–µ–ª—å–µ—Ñ–∞ —á–µ—Ä–µ–∑ —Ü–≤–µ—Ç
‚Ä¢ –ú–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—Ç–µ–Ω–∫–∞ –∫–æ–∂–∏ —Å –ø–æ–º–æ—â—å—é —Ü–≤–µ—Ç–∞

–û–°–û–ë–ï–ù–ù–û–°–¢–¨ –ú–ï–¢–û–î–ò–ö–ò:
‚Ä¢ –í—ã –Ω–µ –ø—Ä–æ—Å—Ç–æ —É—á–∏—Ç–µ —Ç–µ–æ—Ä–∏—é ‚Äî –≤—ã —Ä–∏—Å—É–µ—Ç–µ –æ—Ç—Ç–µ–Ω–∫–∏
‚Ä¢ –ü—Ä–æ–±—É–µ—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ü–≤–µ—Ç–∞ –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ
‚Ä¢ –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –≥–ª–∞–∑–∞ –∏ –∫–æ–ª–æ—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–≥–æ –º—ã—à–ª–µ–Ω–∏—è
‚Ä¢ –ü–µ—Ä–µ—Ö–æ–¥ –æ—Ç "—É–≥–∞–¥–∞–π–∫–∏" –∫ —Å–∏—Å—Ç–µ–º–µ`;

const newBenefits = `‚Ä¢ 3 –¥–Ω—è –ø–æ–ª–Ω–æ–≥–æ –ø–æ–≥—Ä—É–∂–µ–Ω–∏—è –≤ –¢–≤–æ—Ä—á–µ—Å–∫–æ–π –¥–µ—Ä–µ–≤–Ω–µ
‚Ä¢ –ü–µ—Ä–µ—Å—Ç–∞–Ω–µ—Ç–µ –ø–æ–¥–±–∏—Ä–∞—Ç—å —Ñ–æ—Ä–º—É–ª—ã –Ω–∞—É–≥–∞–¥
‚Ä¢ –¢–æ—á–Ω–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –Ω—É–∂–Ω–æ–≥–æ –æ—Ç—Ç–µ–Ω–∫–∞
‚Ä¢ –ê–¥–∞–ø—Ç–∞—Ü–∏—è –∑–Ω–∞–Ω–∏–π –ø–æ–¥ –ª—é–±–æ–π –∫—Ä–∞—Å–∏—Ç–µ–ª—å
‚Ä¢ –§–æ—Ä–º–∞—Ç "–≤—Å—ë –≤–∫–ª—é—á–µ–Ω–æ": –ø—Ä–æ–∂–∏–≤–∞–Ω–∏–µ, –ø–∏—Ç–∞–Ω–∏–µ, –º–∞—Ç–µ—Ä–∏–∞–ª—ã
‚Ä¢ –†–∞–±–æ—Ç–∞ –≤ –º–∞–ª–æ–π –≥—Ä—É–ø–ø–µ —Å –ª–∏—á–Ω—ã–º –≤–Ω–∏–º–∞–Ω–∏–µ–º
‚Ä¢ –ì–ª—É–±–æ–∫–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ —Ü–≤–µ—Ç–∞ –Ω–∞ —Å–∏—Å—Ç–µ–º–Ω–æ–º —É—Ä–æ–≤–Ω–µ
‚Ä¢ –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –≤ —Ä–µ—à–µ–Ω–∏–∏ –ª—é–±–æ–π –∫–æ–ª–æ—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–π –∑–∞–¥–∞—á–∏`;

const newTargetAudience = `‚Ä¢ –ù–∞—á–∏–Ω–∞—é—â–∏–µ –∫–æ–ª–æ—Ä–∏—Å—Ç—ã –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è –æ—Å–Ω–æ–≤
‚Ä¢ –û–ø—ã—Ç–Ω—ã–µ –º–∞—Å—Ç–µ—Ä–∞ –¥–ª—è —Å–∏—Å—Ç–µ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∑–Ω–∞–Ω–∏–π
‚Ä¢ –ü–∞—Ä–∏–∫–º–∞—Ö–µ—Ä—ã, –∂–µ–ª–∞—é—â–∏–µ –ø–µ—Ä–µ–π—Ç–∏ –æ—Ç –∏–Ω—Ç—É–∏—Ü–∏–∏ –∫ —Å–∏—Å—Ç–µ–º–µ
‚Ä¢ –í—Å–µ, –∫—Ç–æ —Ö–æ—á–µ—Ç –ø–æ–Ω—è—Ç—å —Ü–≤–µ—Ç –Ω–∞ –≥–ª—É–±–æ–∫–æ–º —É—Ä–æ–≤–Ω–µ
‚Ä¢ –ú–∞—Å—Ç–µ—Ä–∞, —É—Å—Ç–∞–≤—à–∏–µ –æ—Ç "—É–≥–∞–¥–∞–π–∫–∏" –≤ —Ñ–æ—Ä–º—É–ª–∞—Ö`;

// –í—ã–ø–æ–ª–Ω—è–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
const result = updateCourse.run(
  newDescription,
  newCurriculum,
  newBenefits,
  newTargetAudience,
  '–î–ù–ö –¶–í–ï–¢–ê - –§—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π –∫—É—Ä—Å –ø–æ –∫–æ–ª–æ—Ä–∏—Å—Ç–∏–∫–µ –≤ –¢–≤–æ—Ä—á–µ—Å–∫–æ–π –¥–µ—Ä–µ–≤–Ω–µ'
);

if (result.changes > 0) {
  console.log('‚úÖ –ö—É—Ä—Å "–î–ù–ö –¶–í–ï–¢–ê" —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω!');

  // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
  const updatedCourse = db.prepare('SELECT * FROM courses WHERE name = ?').get('–î–ù–ö –¶–í–ï–¢–ê - –§—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π –∫—É—Ä—Å –ø–æ –∫–æ–ª–æ—Ä–∏—Å—Ç–∏–∫–µ –≤ –¢–≤–æ—Ä—á–µ—Å–∫–æ–π –¥–µ—Ä–µ–≤–Ω–µ');

  if (updatedCourse) {
    console.log('\nüìã –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:');
    console.log('–ù–∞–∑–≤–∞–Ω–∏–µ:', updatedCourse.name);
    console.log('–¶–µ–Ω–∞:', updatedCourse.price, '—Ä—É–±.');
    console.log('–§–æ—Ä–º–∞—Ç:', updatedCourse.format);
    console.log('\n–û–ø–∏—Å–∞–Ω–∏–µ:');
    console.log(updatedCourse.description);
  }
} else {
  console.log('‚ö†Ô∏è –ö—É—Ä—Å –Ω–µ –Ω–∞–π–¥–µ–Ω –∏–ª–∏ –Ω–µ –æ–±–Ω–æ–≤–ª–µ–Ω');
}

// –ö–æ–ø–∏—Ä—É–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—É—é –±–∞–∑—É –≤ –∞–¥–º–∏–Ω-–±–æ—Ç–∞
const fs = require('fs');
if (fs.existsSync('../telegram-admin-bot/')) {
  fs.copyFileSync('./courses.db', '../telegram-admin-bot/courses.db');
  console.log('\n‚úÖ –ë–∞–∑–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞ –≤ telegram-admin-bot');
}

db.close();
console.log('\n‚úÖ –ì–æ—Ç–æ–≤–æ!');
