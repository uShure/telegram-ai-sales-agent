# üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞–º–∏ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

## üóÇÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö `conversations.db` —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–∞–±–ª–∏—Ü—É `conversations` —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ –ø–æ–ª—è–º–∏:
- `id` - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –∑–∞–ø–∏—Å–∏
- `userId` - Telegram ID –∫–ª–∏–µ–Ω—Ç–∞
- `userName` - –∏–º—è –∫–ª–∏–µ–Ω—Ç–∞
- `messages` - JSON —Å –∏—Å—Ç–æ—Ä–∏–µ–π —Å–æ–æ–±—â–µ–Ω–∏–π
- `createdAt` - –¥–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è –¥–∏–∞–ª–æ–≥–∞
- `lastMessageAt` - –¥–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
- `clientStatus` - —Å—Ç–∞—Ç—É—Å –∫–ª–∏–µ–Ω—Ç–∞ (new, interested, negotiating, purchased, lost)
- `notes` - –∑–∞–º–µ—Ç–∫–∏ –æ –∫–ª–∏–µ–Ω—Ç–µ

## üõ†Ô∏è –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã

### 1. –ë—ã—Å—Ç—Ä–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞
```bash
bun run delete-client.js
```
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤
- –ü–æ–∑–≤–æ–ª—è–µ—Ç —É–¥–∞–ª–∏—Ç—å –ø–æ ID
- –û–ø—Ü–∏—è —É–¥–∞–ª–µ–Ω–∏—è –≤—Å–µ–π –±–∞–∑—ã

### 2. –ü–æ–ª–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞–º–∏
```bash
bun run manage-clients.js
```

–ú–µ–Ω—é –æ–ø—Ü–∏–π:
1. **–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤** - —Å–ø–∏—Å–æ–∫ —Å —Å—Ç–∞—Ç—É—Å–∞–º–∏ –∏ –¥–∞—Ç–∞–º–∏
2. **–ü–æ–∫–∞–∑–∞—Ç—å –¥–∏–∞–ª–æ–≥** - –ø—Ä–æ—Å–º–æ—Ç—Ä –ø–µ—Ä–µ–ø–∏—Å–∫–∏ —Å –∫–ª–∏–µ–Ω—Ç–æ–º
3. **–£–¥–∞–ª–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞** - —É–¥–∞–ª–µ–Ω–∏–µ –ø–æ ID
4. **–£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –¥–∏–∞–ª–æ–≥–∏** - –æ—á–∏—Å—Ç–∫–∞ –ø–æ –¥–∞—Ç–µ
5. **–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∏–∞–ª–æ–≥–∏** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ JSON
6. **–ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É** - –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ –±–∞–∑–µ

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –£–¥–∞–ª–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç
bun run delete-client.js

# –£–≤–∏–¥–∏—Ç–µ —Å–ø–∏—Å–æ–∫:
1. –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤
   ID: 123456789
   –°–æ–æ–±—â–µ–Ω–∏–π: 15
   –ü–æ—Å–ª–µ–¥–Ω–µ–µ: 06.08.2025, 15:30

# –í–≤–µ–¥–∏—Ç–µ ID –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è
üí° –í–≤–µ–¥–∏—Ç–µ ID –∫–ª–∏–µ–Ω—Ç–∞: 123456789

# –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ
‚ö†Ô∏è –£–¥–∞–ª–∏—Ç—å –≤—Å–µ –¥–∏–∞–ª–æ–≥–∏ —Å –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤? (–¥–∞/–Ω–µ—Ç): –¥–∞
```

### –û—á–∏—Å—Ç–∏—Ç—å –≤—Å—é –±–∞–∑—É
```bash
bun run delete-client.js

# –í–≤–µ–¥–∏—Ç–µ "all"
üí° –í–≤–µ–¥–∏—Ç–µ ID –∫–ª–∏–µ–Ω—Ç–∞ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è (–∏–ª–∏ "all" –¥–ª—è –æ—á–∏—Å—Ç–∫–∏): all

# –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ
‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï! –≠—Ç–æ —É–¥–∞–ª–∏—Ç –í–°–ï –¥–∏–∞–ª–æ–≥–∏! –í—ã —É–≤–µ—Ä–µ–Ω—ã? (–¥–∞/–Ω–µ—Ç): –¥–∞
```

### –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –¥–∏–∞–ª–æ–≥–∏
```bash
bun run manage-clients.js

# –í—ã–±–µ—Ä–∏—Ç–µ –æ–ø—Ü–∏—é 4
üëâ –í–∞—à –≤—ã–±–æ—Ä: 4

# –£–∫–∞–∂–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π
üí° –£–¥–∞–ª–∏—Ç—å –¥–∏–∞–ª–æ–≥–∏ —Å—Ç–∞—Ä—à–µ —Å–∫–æ–ª—å–∫–∏ –¥–Ω–µ–π? 30

# –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ
‚ö†Ô∏è –ë—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω–æ –¥–∏–∞–ª–æ–≥–æ–≤: 25
–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å? (–¥–∞/–Ω–µ—Ç): –¥–∞
```

## üîç SQL –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –ø—Ä—è–º–æ–π —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π

### –ß–µ—Ä–µ–∑ SQLite CLI
```bash
# –û—Ç–∫—Ä—ã—Ç—å –±–∞–∑—É
sqlite3 conversations.db

# –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤
SELECT DISTINCT userId, userName FROM conversations;

# –£–¥–∞–ª–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞
DELETE FROM conversations WHERE userId = 123456789;

# –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –¥–∏–∞–ª–æ–≥–∏ (—Å—Ç–∞—Ä—à–µ 30 –¥–Ω–µ–π)
DELETE FROM conversations
WHERE lastMessageAt < datetime('now', '-30 days');

# –£–¥–∞–ª–∏—Ç—å –≤—Å—ë
DELETE FROM conversations;

# –í—ã—Ö–æ–¥
.quit
```

### –ß–µ—Ä–µ–∑ Bun
```javascript
import Database from 'bun:sqlite';

const db = new Database('./conversations.db');

// –£–¥–∞–ª–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞
db.prepare('DELETE FROM conversations WHERE userId = ?').run(123456789);

// –£–¥–∞–ª–∏—Ç—å –≤—Å–µ—Ö
db.prepare('DELETE FROM conversations').run();

db.close();
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–ë—ç–∫–∞–ø—ã**: –í—Å–µ–≥–¥–∞ –¥–µ–ª–∞–π—Ç–µ –±—ç–∫–∞–ø –ø–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º
   ```bash
   cp conversations.db conversations.db.backup-$(date +%Y%m%d)
   ```

2. **–û—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç—å**: –£–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–æ–±—Ä–∞—Ç–∏–º–æ!

3. **–°—Ç–∞—Ç—É—Å—ã –∫–ª–∏–µ–Ω—Ç–æ–≤**:
   - `new` - –Ω–æ–≤—ã–π –∫–ª–∏–µ–Ω—Ç
   - `interested` - –ø—Ä–æ—è–≤–∏–ª –∏–Ω—Ç–µ—Ä–µ—Å
   - `negotiating` - –≤ –ø–µ—Ä–µ–≥–æ–≤–æ—Ä–∞—Ö
   - `purchased` - –∫—É–ø–∏–ª –∫—É—Ä—Å
   - `lost` - –ø–æ—Ç–µ—Ä—è–Ω

4. **–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å –ø—Ä–∞–≤–∞ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

## üöÄ –ë—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —Å–µ—Ä–≤–µ—Ä–∞

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
cd ~/telegram-ai-sales-agent

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–æ—Ç–∞ –ø–µ—Ä–µ–¥ —Ä–∞–±–æ—Ç–æ–π —Å –±–∞–∑–æ–π
pm2 stop sointera-sales

# –°–¥–µ–ª–∞—Ç—å –±—ç–∫–∞–ø
cp conversations.db conversations.db.backup-$(date +%Y%m%d-%H%M%S)

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞–º–∏
bun run manage-clients.js

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞ –æ–±—Ä–∞—Ç–Ω–æ
pm2 start sointera-sales
```

## üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

–ü–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è –º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:
```bash
# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –≤ –±–∞–∑–µ
sqlite3 conversations.db "SELECT COUNT(*) FROM conversations;"

# –°–ø–∏—Å–æ–∫ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤
sqlite3 conversations.db "SELECT DISTINCT userId, userName FROM conversations;"
```
